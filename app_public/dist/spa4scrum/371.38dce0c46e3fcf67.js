"use strict";(self.webpackChunkspa4scrum=self.webpackChunkspa4scrum||[]).push([[371],{5371:(H,Z,a)=>{a.r(Z),a.d(Z,{UserModule:()=>F});var _=a(6019),c=a(1659),m=a(1427),d=a(888),U=a(3660),f=a(86),h=a(138),g=a(8167),o=a(9133),n=a(3668),T=a(2993);function q(t,s){if(1&t){const e=n.EpF();n.TgZ(0,"div",4),n.TgZ(1,"button",5),n.NdJ("click",function(){return n.CHM(e),n.oxw().onSignOutBtnClick()}),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.qZA()}2&t&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"user_info.sign_out")," "))}let b=(()=>{class t{constructor(e,r,i,p){this.translate=e,this.usrService=r,this.route=i,this.router=p,this.nowUsr=null,e.setTranslation("en",{user_info:{user_information:"User information",user_id:"User ID:",username:"Username:",email:"Email:",email_verified:"Email verified:",sign_out:"Sign out"}},!0),e.setTranslation("zh_cn",{user_info:{user_information:"\u7528\u6237\u4fe1\u606f",user_id:"\u7528\u6237 ID\uff1a",username:"\u7528\u6237\u540d\uff1a",email:"\u90ae\u7bb1\uff1a",email_verified:"\u90ae\u7bb1\u662f\u5426\u9a8c\u8bc1\uff1a",sign_out:"\u767b\u51fa"}},!0)}set usrID(e){!e||this.usrService.getUserByID(e).then(r=>this.nowUsr=r)}ngOnInit(){this.usrID=this.route.snapshot.paramMap.get("usrID")}onSignOutBtnClick(){this.usrService.signOut(),this.router.navigateByUrl("/usr/sign-in-or-sign-up")}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(m.sK),n.Y36(T.K),n.Y36(c.gz),n.Y36(c.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-user"]],decls:25,vars:4,consts:[[1,"user-page"],[1,"user-info"],["translate",""],["class","sign-out",4,"ngIf"],[1,"sign-out"],["mat-stroked-button","",3,"click"]],template:function(e,r){if(1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"table"),n.TgZ(3,"caption"),n.TgZ(4,"h2",2),n._uU(5,"user_info.user_information"),n.qZA(),n.qZA(),n.TgZ(6,"tr"),n.TgZ(7,"td"),n.TgZ(8,"b",2),n._uU(9,"user_info.user_id"),n.qZA(),n.qZA(),n.TgZ(10,"td"),n._uU(11),n.qZA(),n.qZA(),n.TgZ(12,"tr"),n.TgZ(13,"td"),n.TgZ(14,"b",2),n._uU(15,"user_info.username"),n.qZA(),n.qZA(),n.TgZ(16,"td"),n._uU(17),n.qZA(),n.qZA(),n.TgZ(18,"tr"),n.TgZ(19,"td"),n.TgZ(20,"b",2),n._uU(21,"user_info.email"),n.qZA(),n.qZA(),n.TgZ(22,"td"),n._uU(23),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(24,q,4,3,"div",3),n.qZA()),2&e){let i;n.xp6(11),n.Oqu(null==r.nowUsr?null:r.nowUsr._id),n.xp6(6),n.Oqu(null==r.nowUsr?null:r.nowUsr.username),n.xp6(6),n.Oqu(null==r.nowUsr?null:r.nowUsr.email),n.xp6(1),n.Q6J("ngIf",r.nowUsr&&r.nowUsr._id==(null==(i=r.usrService.getCurrentUser())?null:i._id))}},directives:[m.Pi,_.O5,f.lW],pipes:[m.X$],styles:["body[_ngcontent-%COMP%]{position:relative}.user-page[_ngcontent-%COMP%]{position:absolute;bottom:50%;width:100%}.user-info[_ngcontent-%COMP%]{margin:20px}amplify-sign-out[_ngcontent-%COMP%]{display:flex;justify-content:center}table[_ngcontent-%COMP%]{margin:auto}table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;text-align:left;min-width:160px}tr[_ngcontent-%COMP%]{font-size:1rem;vertical-align:bottom}tr[_ngcontent-%COMP%]:first-child{vertical-align:top}tr[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{float:right;text-align:end}td[_ngcontent-%COMP%]:not(:first-child){padding-left:20px}.sign-out[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),t})();var w=a(8239),u=a(9814);function C(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.username.required"),n.oJD)}function v(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.password.required"),n.oJD)}function I(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.username.required"),n.oJD)}function A(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.password.required"),n.oJD)}function O(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.password.minlength"),n.oJD)}function S(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.confirmPwd.required"),n.oJD)}function M(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.confirmPwd.mustMatch"),n.oJD)}function P(t,s){1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"sign_in_or_up.error.email.not_valid")," "))}function J(t,s){1&t&&(n._UZ(0,"mat-error",15),n.ALo(1,"translate")),2&t&&n.Q6J("innerHTML",n.lcZ(1,1,"sign_in_or_up.error.email.required"),n.oJD)}let y=(()=>{class t{constructor(e,r,i,p){this.translate=e,this.formBuilder=r,this.usrService=i,this.router=p,this.cardFlipState="signIn",this.passwordHide=!0,this.signInFormGroup=this.formBuilder.group({username:["",o.kI.required],password:["",o.kI.required]}),this.signUpFormGroup=this.formBuilder.group({username:["",o.kI.required],password:["",[o.kI.required,o.kI.minLength(6)]],confirmPwd:["",o.kI.required],email:["",[o.kI.required,o.kI.email]]},{validator:this.ComparePassword("password","confirmPwd")}),e.setTranslation("en",{sign_in_or_up:{sign_in:"Sign in",sign_up:"Sign up",username:"Username",password:"Password",confirmPwd:"Confirm password",email:"Email",confirm:"Confirm",error:{username:{required:"Username is <b>required</b>."},password:{required:"Password is <b>required</b>.",minlength:"Too short."},confirmPwd:{required:"Confirm password is <b>required</b>.",mustMatch:"Does not match the password."},email:{not_valid:"Please enter a valid email address.",required:"Email is <b>required</b>."}}}},!0),e.setTranslation("zh_cn",{sign_in_or_up:{sign_in:"\u767b\u5f55",sign_up:"\u6ce8\u518c",username:"\u7528\u6237\u540d",password:"\u5bc6\u7801",confirmPwd:"\u786e\u8ba4\u5bc6\u7801",email:"\u90ae\u7bb1",confirm:"\u786e\u8ba4",error:{username:{required:"\u7528\u6237\u540d\u662f<b>\u5fc5\u987b</b>\u7684\u3002"},password:{required:"\u5bc6\u7801\u662f<b>\u5fc5\u987b</b>\u7684\u3002",minlength:"\u592a\u77ed\u4e86\u3002"},confirmPwd:{required:"\u8be5\u5b57\u6bb5\u662f<b>\u5fc5\u987b</b>\u7684\u3002",mustMatch:"\u548c\u539f\u5bc6\u7801\u4e0d\u5339\u914d\u3002"},email:{not_valid:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u5408\u6cd5\u7684\u90ae\u7bb1\u5730\u5740\u3002",required:"\u90ae\u7bb1\u662f<b>\u5fc5\u987b</b>\u7684\u3002"}}}},!0)}toggleFlip(){this.cardFlipState="signIn"==this.cardFlipState?"signUp":"signIn",this.passwordHide=!0,this.initOrResetFormGroup()}ComparePassword(e,r){return i=>{const l=i.controls[r];l.errors&&!l.errors.mustMatch||l.setErrors(i.controls[e].value!==l.value?{mustMatch:!0}:null)}}initOrResetFormGroup(){this.signInFormGroup.reset(),this.signUpFormGroup.reset()}onSignIn(){var e=this;return(0,w.Z)(function*(){var r;const{username:i,password:p}=e.signInFormGroup.getRawValue();(yield e.usrService.login(i,p))||e.router.navigateByUrl("/usr/"+(null===(r=e.usrService.getCurrentUser())||void 0===r?void 0:r._id))})()}onSignUp(){var e=this;return(0,w.Z)(function*(){const{username:r,password:i,email:p}=e.signUpFormGroup.getRawValue();(yield e.usrService.register(r,i,p)).success&&e.toggleFlip()})()}ngOnInit(){this.initOrResetFormGroup()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(m.sK),n.Y36(o.qu),n.Y36(T.K),n.Y36(c.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-sign-in-or-sign-up"]],decls:71,vars:38,consts:[[1,"flip-wrapper"],["id","sign-in",1,"mat-elevation-z8"],["mat-button","",3,"click"],["translate",""],[3,"formGroup"],["matInput","","formControlName","username"],[3,"innerHTML",4,"ngIf"],["matInput","","formControlName","password","autocomplete","on",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["mat-stroked-button","","color","accent","type","submit",3,"disabled","click"],["id","sign-up",1,"mat-elevation-z8"],["matInput","","formControlName","password","autocomplete","off",3,"type"],["matInput","","formControlName","confirmPwd","autocomplete","off",3,"type"],["type","email","matInput","","placeholder","Ex. pat@example.com","formControlName","email"],[4,"ngIf"],[3,"innerHTML"]],template:function(e,r){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"mat-card",1),n.TgZ(2,"mat-card-subtitle"),n.TgZ(3,"button",2),n.NdJ("click",function(){return r.toggleFlip()}),n._uU(4),n.ALo(5,"translate"),n.TgZ(6,"mat-icon"),n._uU(7,"arrow_forward_ios"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"mat-card-title",3),n._uU(9,"sign_in_or_up.sign_in"),n.qZA(),n.TgZ(10,"mat-card-content"),n.TgZ(11,"form",4),n.TgZ(12,"mat-form-field"),n.TgZ(13,"mat-label",3),n._uU(14,"sign_in_or_up.username"),n.qZA(),n._UZ(15,"input",5),n.YNc(16,C,2,3,"mat-error",6),n.qZA(),n.TgZ(17,"mat-form-field"),n.TgZ(18,"mat-label",3),n._uU(19,"sign_in_or_up.password"),n.qZA(),n._UZ(20,"input",7),n.TgZ(21,"button",8),n.NdJ("click",function(){return r.passwordHide=!r.passwordHide}),n.TgZ(22,"mat-icon"),n._uU(23),n.qZA(),n.qZA(),n.YNc(24,v,2,3,"mat-error",6),n.qZA(),n.TgZ(25,"button",9),n.NdJ("click",function(){return r.onSignIn()}),n._uU(26),n.ALo(27,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"mat-card",10),n.TgZ(29,"mat-card-subtitle"),n.TgZ(30,"button",2),n.NdJ("click",function(){return r.toggleFlip()}),n.TgZ(31,"mat-icon"),n._uU(32,"arrow_back_ios"),n.qZA(),n._uU(33),n.ALo(34,"translate"),n.qZA(),n.qZA(),n.TgZ(35,"mat-card-title",3),n._uU(36,"sign_in_or_up.sign_up"),n.qZA(),n.TgZ(37,"mat-card-content"),n.TgZ(38,"form",4),n.TgZ(39,"mat-form-field"),n.TgZ(40,"mat-label",3),n._uU(41,"sign_in_or_up.username"),n.qZA(),n._UZ(42,"input",5),n.YNc(43,I,2,3,"mat-error",6),n.qZA(),n.TgZ(44,"mat-form-field"),n.TgZ(45,"mat-label",3),n._uU(46,"sign_in_or_up.password"),n.qZA(),n._UZ(47,"input",11),n.TgZ(48,"button",8),n.NdJ("click",function(){return r.passwordHide=!r.passwordHide}),n.TgZ(49,"mat-icon"),n._uU(50),n.qZA(),n.qZA(),n.YNc(51,A,2,3,"mat-error",6),n.YNc(52,O,2,3,"mat-error",6),n.qZA(),n.TgZ(53,"mat-form-field"),n.TgZ(54,"mat-label",3),n._uU(55,"sign_in_or_up.confirmPwd"),n.qZA(),n._UZ(56,"input",12),n.TgZ(57,"button",8),n.NdJ("click",function(){return r.passwordHide=!r.passwordHide}),n.TgZ(58,"mat-icon"),n._uU(59),n.qZA(),n.qZA(),n.YNc(60,S,2,3,"mat-error",6),n.YNc(61,M,2,3,"mat-error",6),n.qZA(),n.TgZ(62,"mat-form-field"),n.TgZ(63,"mat-label",3),n._uU(64,"sign_in_or_up.email"),n.qZA(),n._UZ(65,"input",13),n.YNc(66,P,3,3,"mat-error",14),n.YNc(67,J,2,3,"mat-error",6),n.qZA(),n.TgZ(68,"button",9),n.NdJ("click",function(){return r.onSignUp()}),n._uU(69),n.ALo(70,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("@cardFlip",r.cardFlipState),n.xp6(4),n.hij(" ",n.lcZ(5,30,"sign_in_or_up.sign_up")," "),n.xp6(7),n.Q6J("formGroup",r.signInFormGroup),n.xp6(5),n.Q6J("ngIf",r.signInFormGroup.hasError("required","username")),n.xp6(4),n.Q6J("type",r.passwordHide?"password":"text"),n.xp6(1),n.uIk("aria-label","Hide password")("aria-pressed",r.passwordHide),n.xp6(2),n.Oqu(r.passwordHide?"visibility_off":"visibility"),n.xp6(1),n.Q6J("ngIf",r.signInFormGroup.hasError("required","password")),n.xp6(1),n.Q6J("disabled",r.signInFormGroup.invalid),n.xp6(1),n.Oqu(n.lcZ(27,32,"sign_in_or_up.sign_in")),n.xp6(7),n.hij(" ",n.lcZ(34,34,"sign_in_or_up.sign_in")," "),n.xp6(5),n.Q6J("formGroup",r.signUpFormGroup),n.xp6(5),n.Q6J("ngIf",r.signUpFormGroup.hasError("required","username")),n.xp6(4),n.Q6J("type",r.passwordHide?"password":"text"),n.xp6(1),n.uIk("aria-label","Hide password")("aria-pressed",r.passwordHide),n.xp6(2),n.Oqu(r.passwordHide?"visibility_off":"visibility"),n.xp6(1),n.Q6J("ngIf",r.signUpFormGroup.hasError("required","password")),n.xp6(1),n.Q6J("ngIf",r.signUpFormGroup.hasError("minlength","password")),n.xp6(4),n.Q6J("type",r.passwordHide?"password":"text"),n.xp6(1),n.uIk("aria-label","Hide password")("aria-pressed",r.passwordHide),n.xp6(2),n.Oqu(r.passwordHide?"visibility_off":"visibility"),n.xp6(1),n.Q6J("ngIf",r.signUpFormGroup.hasError("required","confirmPwd")),n.xp6(1),n.Q6J("ngIf",r.signUpFormGroup.hasError("mustMatch","confirmPwd")),n.xp6(5),n.Q6J("ngIf",r.signUpFormGroup.hasError("email","email")),n.xp6(1),n.Q6J("ngIf",r.signUpFormGroup.hasError("required","email")),n.xp6(1),n.Q6J("disabled",r.signUpFormGroup.invalid),n.xp6(1),n.Oqu(n.lcZ(70,36,"sign_in_or_up.confirm")))},directives:[d.a8,d.$j,f.lW,U.Hw,d.n5,m.Pi,d.dn,o._Y,o.JL,o.sg,g.KE,g.hX,h.Nt,o.Fj,o.JJ,o.u,_.O5,g.R9,g.TO],pipes:[m.X$],styles:["[_nghost-%COMP%]{background-color:#909090;perspective:1200px;display:flex;justify-content:center;align-items:center;height:calc(100vh - var(--toolbarHeight))}.flip-wrapper[_ngcontent-%COMP%]{width:45vw;min-width:300px;height:50%;min-height:450px;transform-style:preserve-3d;position:relative}mat-card[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;box-sizing:border-box;-webkit-backface-visibility:hidden;backface-visibility:hidden;text-align:center}#sign-up[_ngcontent-%COMP%]{transform:rotateY(-180deg)}mat-card[_ngcontent-%COMP%]:first-of-type > mat-card-subtitle[_ngcontent-%COMP%]{text-align:end}mat-card[_ngcontent-%COMP%]:not(:first-of-type) > mat-card-subtitle[_ngcontent-%COMP%]{text-align:start}mat-card-title[_ngcontent-%COMP%]{font-size:1.7rem}form[_ngcontent-%COMP%]{margin-top:20px!important;width:100%;font-size:.9rem}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:calc(100% - 20px)}mat-form-field[_ngcontent-%COMP%]{margin:0 10px}button[mat-icon-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:100%;font-size:1.5rem!important}button[type=submit][_ngcontent-%COMP%]{margin-top:1.5rem}"],data:{animation:[(0,u.X$)("cardFlip",[(0,u.SB)("signIn",(0,u.oB)({transform:"none"})),(0,u.SB)("signUp",(0,u.oB)({transform:"rotateY(180deg)"})),(0,u.eR)("signIn => signUp",(0,u.jt)("500ms ease-out")),(0,u.eR)("signUp => signIn",(0,u.jt)("500ms ease-in"))])]}}),t})(),F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[{provide:g.o2,useValue:{appearance:"legacy"}}],imports:[[_.ez,c.Bz.forChild([{path:"",redirectTo:"sign-in-or-sign-up",pathMatch:"full"},{path:"sign-in-or-sign-up",component:y},{path:":usrID",component:b}]),m.aw.forChild({defaultLanguage:"en"}),d.QW,U.Ps,f.ot,h.c,g.lN,o.u5,o.UX]]}),t})()}}]);